## 🚀 1. EC2(Elastic Compute Cloud)
### 1.1. EC2 소개
- 알파벳 E가 한 번 나오고 C가 연속으로 두 번 나오기 때문에 EC2라고 이름을 지었다.
- 컴퓨팅 자원을 클라우드로 제공하는 서비스라는 것이다.
- 탄력적으로 컴퓨팅 자원을 제공해주는 서비스라고 할 수 있다.
- Virtual Machine을 인터넷을 통해 제공해주는 서비스이다. 그래서 EC2를 가상 서버 서비스라고 부른다.
- 용도에 따른 다양한 인스턴스 타입을 제공한다. 참고로 여기서 인스턴스라는 단어는 EC2의 수량을 뜻하는 단위라고 보면 된다.
- 우리가 서버 숫자를 셀 때 한 대, 두 대라고 하는 것처럼 EC2는 인스턴스 한 개, 인스턴스 두 개 이런식으로 표현한다.
- 그리고 여기서 하나의 인스턴스는 가상머신 하나를 의미한다고 보면 된다.
<br/>

### 1.2. EC2 인스턴스 타입
- 다양한 인스턴스 타입을 지원한다.
- 인스턴스 타입은 패밀리라고도 부른다.
<br/>

![image](https://github.com/user-attachments/assets/040f693c-35b7-45db-8f4d-e4d006d542e1)


<br/>

- M 패밀리: 컴퓨팅, 메모리, 네트워크 리소스를 균형적으로 사용할 수 있는 범용 인스턴스 타입
- C 패밀리: EC2에서 최고 성능의 프로세서 제공
- R 패밀리: 메모리 용량이 많이 필요한 애플리케이션용
- T 패밀리: 성능을 순간적으로 확장 가능, **프리티어에서 제공되는 타입**
  - AWS 계정을 생성한 시점으로부터 12개월 동안은 프리티어로 t2.micro 또는 t3.micro를 무료로 사용할 수 있다.
- G 패밀리, P 패밀리: GPU 자원이 많이 필요한 애플리케이션용
- I 패밀리: 높은 I/O를 제공
- D 패밀리: 높은 디스크 처리량
<br/>
EC2에서는 용도에 맞게 다양한 인스턴스 타입을 제공하는데, 모든 인스턴스 타입을 다 외울 필요는 없고 필요할 때마다 자신이 원하는 용도에 맞는 타입을 찾아서 사용하면 된다.
<br/>
<br/>

### 3. EC2 인스턴스 구분
![image](https://github.com/user-attachments/assets/0bd549b7-42d1-462b-a4b7-93286d9e35cd)
<br/>
➡️ EC2 인스턴스 이름 표기법
<br/>

- 처음으로 나오는 알파벳은 인스턴스 패밀리를 의미한다. 각자 사용할 용도에 따라 인스턴스 패밀리를 선택하면 된다.
- 인스턴스 패밀리 다음으로 나오는 숫자는 `인스턴스의 세대`를 의미한다.
- 위의 경어 `T패밀리의 3세대`라는 뜻이 된다.
- 인스턴스 세대는 숫자가 높을수록 최신 세대를 의미하고, 최선일수록 `비용 대비 성능이 우수하다`는 특징이 있다.
- 마지막으로 나오는 크기를 나타내는 영어 단어는 `인스턴스의 사이즈`를 의미한다.
  - 사이즈의 단위는 micro, small, medium, large 등으로 나타내는데, 이 **사이즈가 한 단계 커질 때마다 용량 및 가격이 두 배씩 증가**하게 된다.
  - 사이즈를 한 단계씩 올릴 때마다 비용이 두배로 증가한다는 점을 꼭 기억하고, 요금이 많이 나오지 않도록 적절한 용량을 선택해서 사용하는 것이 중요하다.
- EC2 인스턴스는 생성 이후에도 인스턴스 타입, 세대, 사이즈 등의 사양을 변경할 수 있다.
<br/>
<br/>

### 4. EC2 과금 옵션
- 클라우드 서비스를 사용할 때 가장 중요한 부분 중 하나는 요금이다.
- 클라우드는 초기 비용이 없다는 장점이 있지만, 사용한 만큼 요금을 내기 때문에 과금 옵션을 잘 선택해서 사용하는 것이 중요하다.
![image](https://github.com/user-attachments/assets/006ee2f6-c61c-4cb8-abac-a3ae8c6541a0)
<br/>

❄️ **On-Demand**
- 가장 기본적인 요금제로 **약정 없이 쓴 만큼만 지불하는 요금제**이다.
- 신규 서비스의 경우에는 초기에 트래픽이 어느 정도 나올지 예측하기 어렵기 때문에 이 요금제를 사용하는 경우가 많다.

<br/>

❄️ **Reserved Instance(RI)**
- 인스턴스를 예약해서 사용하는 것 이다.
- 쉽게 말해 약정 할인이라고 보면 된다.
  - 가정에서 인터넷을 사용할 때 1년 혹은 3년 약정을 하면 요금 할인해주는 것과 같다.
- RI를 사용하면 1년 혹인 3년 약정을 하고 40~70%까지 할인을 받을 수 있다.
- 할인 폭이 굉장히 크기 때문에 **적어도 인스턴스를 1년 이상 유지할 계획이라면 무조건 RI를 사용하는 것**이 비용 측면에서 좋다.
  
<br/>

❄️ **Spot Instance**
- AWS에서 **남는 자원을 경매 방식으로 입찰**받아서 아주 싼 값에 사용할 수 있게 해주는 요금제이다.
- 할인율이 거의 80~90%로 굉장히 높지만 경매 방식을 사용하기 때문에 낙찰받지 못하면 사용할 수 없다.
- 그래서 인스턴스가 꼭 필요한 경우에는 On-Demand나 Reserved Instance 요금제를 사용해야 하고, 가끔씩 있는 작업을 위해서 Spot Instance를 사용하는 것이 좋다.

<br/>

![image](https://github.com/user-attachments/assets/bbdc1886-86c3-4444-bb39-2a3c9d1ba21a)

<br/>

❄️ **가격 비교**
- On-Demand: 한 달에 약 60.74$. 한화로 8만원 정도가 나오게 된다.
- RI: 1년 약정하고 1년치 금액을 모두 한 번에 선결제 할 경우 약 41% 저렴하다.
  - 3년 약정하고 3년치 금액을 모두 한 번에 선 결제 할 경우네는 약 62% 저렴하다.
  - 최소 1년 이상 인스턴스를 계속 사용해야 할 경우에는 무조건 RI를 사용하는 것이 좋다.
- Spot Instance: 평균적으로 70% 저렴하게 이용할 수 있다.
  - 경매 방식으로 낙찰받아서 사용하는 방식이기 때문에 무조건 낙찰 받을 수 없다는 점과 매번 가격이 달라질 수 있다는 단점이 있다.

<br/>

## 🚀 2. Elastic IP
### 2.1. Elastic의 의미
- Elastic은 우리말로 탄력적이라는 뜻을 갖고 있다.
- AWS에서 탄력적이라는 말은 여기 저기 붙였다 뗐다 할 수 있는 성질을 의미한다.
- 여기서 붙인다는 것은 다른 AWS 서비스와 연동시킨다는 의미이고, 떼는 것은 다른 AWS 서비스와 연동을 해제한다는 의미이다.
- AWS에서 Elastic이라는 단어가 들어가면 `다른 서비스와 유연하게 연동해서 사용할 수 있겠구나`라고 이해하면 된다.

<br/>

### 2.2. Elastic IP란?
- Elastic IP address를 줄여서 쓴 말이다.
- 우리가 흔히 IP 주소를 줄여서 IP라고 부르는 것처럼, Elastic IP도 뒤에 address를 생략하고 Elastic IP라고 부르는 것이다.
- Elastic IP는 클라우드 컴퓨팅을 위해 고안된 정적 IPv4 주소이다. 그래서 말 그대로 클라우드 컴퓨팅을 위해 만들어진 특별한 형태의 IP 주소라고 보면 된다.
![image](https://github.com/user-attachments/assets/c7065f22-9189-43f9-9982-47f8b6e30064)
- IPv4라는 단어가 등장하는데 IPv4는 Internet Protocol version 4를 줄여서 쓴 것이며, 위와 같이 4자리로 구분된 우리가 평소에 흔히 사용하는 IP 주소를 의미한다.
- Elastic IP도 일종의 IP 주소이기 떄문에 이렇게 IPv4와 같은 형태라고 보면 된다.
![image](https://github.com/user-attachments/assets/6ad974f4-e45f-49e0-915d-8aba39a4466d)
- 점선으로 된 리전이 등장한다. 리전은 AWS 서비스가 운영되는 지역을 의미한다.
- 리전 안에는 복수 개의 가용 영역이 존재한다고 배웠다. 가용 영역은 하나의 리전 내에 물리적으로 분리된 데이터 센터를 의미했다.
- 이러한 각 리전에서 AWS 계정과 연동된 Elastic IP를 할당 받을 수 있다. 그리고 할당 받은 Elastic IP를 EC2 인스턴스에 연결하면 해당 IP 주소로 EC2 인스턴스에 접속할 수 있다.
- 이러한 Elastic IP는 AWS 계정과 연결된다. 그리고 IP 주소는 숫자로 구성되어 있고 그 개수가 정해져 있는 자원이기 때문에 각 계정 별로 할당 받을 수 있는 Elastic IP의 개수가 리전 당 5개로 제한되어 있다.
- 한정된 자원을 맘껏 사용하도록 해준다면 한 사람이 독점하는 문제가 생길 수 있어 계정 별로 할당 받을 수 있는 개수를 제한해둔 것이라고 보면 된다.

<br/>

### 2.3. Elastic IP의 용도
![image](https://github.com/user-attachments/assets/f3467552-8f98-452d-930c-45da55edc176)
- Elastic IP를 할당 받아서 EC2 인스턴스에 연결했다. 그리고 클라이언트는 이 Elastic IP를 통해서 EC2 인스턴스에 접속하게 된다.
![image](https://github.com/user-attachments/assets/c623f3ab-9c5e-47de-b379-3d6e22f23c2b)
- 그런데 만약 해당 EC2 인스턴스에 장애가 발생하게 되면 서버가 정상적으로 작동하지 않을 것이다.
![image](https://github.com/user-attachments/assets/35bc365b-a004-4dca-adaa-003329d15a4e)
- 이러한 경루 장애를 극복하기 위해서 먼저 새로운 EC2 인스턴스를 하나 생성한다.
![image](https://github.com/user-attachments/assets/9218a211-a963-4b81-8bed-865e65e15376)
- 그리고 이렇게 Elastic IP를 새로운 EC2 인스턴스에 연결함으로써 서버가 정상저긍로 작동할 수 있도록 만들 수 있다.
- 이렇게 Elastic IP를 사용하면 **클라이언트에서 접속하는 IP 주소의 변경 없이 서버의 장애를 극복**할 수 있다.
- 만약 Elastic IP가 없었다면 새로운 EC2 인스턴스의 IP를 클라이언트에 반영해야 한다.

<br/>

⚠️ **Elastic IP를 사용할 때 유의할 점**
- Elastic IP는 인스턴스에 연결해두면 무료로 사용할 수 있지만, 그렇지 않고 할당만 받고 아무 인스턴스에도 연결해두지 않으면 시간당 0.005달러가 과금된다.
- Elastic IP는 무한한 자원이 아니기 때문에 각 AWS 계정에 대해 리전당 5개로 개수가 제한되어 있다.
- 그리고 할당만 받고 사용하지 않는 Elastic IP들이 생기지 않도록 이렇게 과금을 하는 것이라고 이해하면 된다.

<br/>

## 🚀 3. Security Group
- 우리 말로 보안 그룹이라고 부른다. 이름이 가진 의미 그대로 보안을 위해 사용되는 개념이라고 보면 된다.
- 이 보안 그룹은 하나 이상의 인스턴스에 대한 트래픽을 제어하는 가상의 방화벽 역할을 한다.

<br/>

🔥 **방화벽(Firewall)**
- 컴퓨터의 보안을 위해 외부에서 내부 또는 내부에서 외부의 정보통신망에 접근하는 것을 허용하거나 차단하기 위한 시스템이다.
- AWS에서 이러한 방화벽의 역할을 하는 것이 `Security Group(보안그룹)`이다.

<br/>

❄️ **보안 그룹 작동 방식**
<br/>

![image](https://github.com/user-attachments/assets/d10fcfc1-eb8c-497a-b1dc-96e05e568436)
- `Inbound 트래픽`: 서버의 입장에서 안으로 들어오는 트래픽
- `Outbound 트래픽`: 서버의 밖으로 나가는 트래픽
- 트래픽을 구분할 때는 서버의 입장에서 생각하는 습관을 들이면 좋다.
- Security Group은 서버와 클라이언트 사이에서 Inbound와 Outbound 트래픽을 허용하거나 차단하게 된다.
- 인바운드 규칙에 등록되어 있으면 들어오는 트래픽을 허용하고, 그렇지 않으면 막히게 된다.
- 반대로 아웃바운드 규칙에 등록되어 있으면 나가는 트래픽을 허용하고, 그렇지 않으면 막히게 되는 것이다.
- Security Group에는 보안 규칙이 여러 개 등록될 수 있다.
- 이러한 **규칙들 중 하나라도 만족할 경우에는 트래픽이 허용**된다고 보면된다.
- 또한 여러 개의 EC2 인스턴스가 하나의 Security Group과 연동될 수도 있다.

<br/>

✔️ **중요한 점**
- **기본적으로 보안 그룹은 모든 아웃바운드 트래픽을 허용**한다는 점이다.
- 이 말은 서버의 입장에서 밖으로 나가는 트래픽은 기본저긍로 모두 허용한다는 뜻이다.
- 쉽게 말해서, 들어올 때는 검사를 하지만 나갈 때는 신경 쓰지 않겠다는 것이다.
- 또 한가지 중요한 점은 보안 그룹 규칙은 항상 허용적이라는 점이다.
- 그래서 액세스를 거부하는 규칙을 생성할 수 없다.
![image](https://github.com/user-attachments/assets/f8b74772-d138-496b-95e7-de1a250d1b39)
- 예를 들면, "특정 IP 주소에서 서버의 3000번 포트로 접속하는 것을 허용하겠다"라고 규칙을 작성할 수 있지만
- "특정 IP 주소에서 서버의 3000번 포트로 접속하는 것을 허용하지 않겠다"처럼 액세스를 거부하는 형태로 규칙을 작성할 수 없다는 말이다.
![image](https://github.com/user-attachments/assets/60028a57-9518-4628-be05-396b4a24d26b)
- 인바운드 규칙과 아웃바운드 규칙이 각각 탭으로 분리되어 있는 것을 볼 수 있다.
- 여기에 각자 자신이 허용할 규칙들을 작성하면 된다.
- 보안 그룹에는 언제든지 규칙을 추가하고 제거할 수 있다.
- 그리고 이렇게 변경된 규칙은 보안 그룹과 연결된 자원(인스턴스)에 자동으로 적용된다.

<br/>

✔️ **여러 보안 그룹을 하나의 인스턴스에 연결할 수 있다.**
![image](https://github.com/user-attachments/assets/3956cb23-f3c9-410f-91a0-26eb97758474)
- 위 그림과 같이 할 경우 보안 그룹의 규칙이 유효하게 결합된 단일 규칙 세트가 생성된다.
![image](https://github.com/user-attachments/assets/830f24f4-467c-478c-a1da-20fb8d1e525c)
- 결과적으로 위 그림과 같이 보안 규칙 A, 보안 규칙 B, 보안 규칙 C가 EC2 인스턴스에 적용된다고 보면 된다.
- 그리고 이 규칙 세트를 사용하여 액세스를 허용할지 여부를 결정한다.
- 쉽게 말해서 **인스턴스에 연결된 모든 보안 그룹의 합집합**이 적용된다고 이해하면 된다.
